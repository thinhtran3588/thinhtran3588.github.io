<!DOCTYPE html><html lang="en-US" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content=""><meta name="hour-prompt" content=""><meta name="minute-prompt" content=""><meta name="justnow-prompt" content=""><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Migrate Postgres database" /><meta name="author" content="Thinh Tran" /><meta property="og:locale" content="en_US" /><meta name="description" content="tqt/pg-migrate - migrate Postgres database with SQL scripts" /><meta property="og:description" content="tqt/pg-migrate - migrate Postgres database with SQL scripts" /><link rel="canonical" href="https://thinhtran.pro/posts/migrate-postgres-database/" /><meta property="og:url" content="https://thinhtran.pro/posts/migrate-postgres-database/" /><meta property="og:site_name" content="Thinh Tran" /><meta property="og:image" content="https://thinhtran.pro/assets/img/postgresql-love-nodejs.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-05-30T06:26:00+07:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://thinhtran.pro/assets/img/postgresql-love-nodejs.png" /><meta property="twitter:title" content="Migrate Postgres database" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Thinh Tran" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Thinh Tran"},"description":"tqt/pg-migrate - migrate Postgres database with SQL scripts","url":"https://thinhtran.pro/posts/migrate-postgres-database/","@type":"BlogPosting","image":"https://thinhtran.pro/assets/img/postgresql-love-nodejs.png","headline":"Migrate Postgres database","dateModified":"2021-06-09T13:40:47+07:00","datePublished":"2021-05-30T06:26:00+07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://thinhtran.pro/posts/migrate-postgres-database/"},"@context":"https://schema.org"}</script><title>Migrate Postgres database | Thinh Tran</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Thinh Tran"><meta name="application-name" content="Thinh Tran"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Thinh Tran</a></div><div class="site-subtitle font-italic">A software developer who loves to make life more enjoyable by programming.</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span></span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://www.linkedin.com/in/thinh-tran-4566a564" aria-label="linkedin" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href="https://github.com/thinhtran3588" aria-label="github" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['quangthinhtran3588','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> </a> </span> <span>Migrate Postgres database</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" ></span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Migrate Postgres database</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Thinh Tran </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="2021-05-30 06:26:00 +0700" >2021-05-30 06:26:00 +0700<i class="unloaded">2021-05-30T06:26:00+07:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="2021-06-09 13:40:47 +0700 " >2021-06-09 13:40:47 +0700 <i class="unloaded">2021-06-09T13:40:47+07:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="567 ">3 </span></div></div><div class="post-content"><p><img data-proofer-ignore data-src="/assets/img/postgresql-love-nodejs.png" alt="Image" /></p><p>I’ve been working with SQL Server for years before moving to MongoDB. I loved Mongo for its simplicity but still wanted SQL so badly. People like SQL so much and even uses them in cloud services such as AWS Athena and Google Big Query. Then I decided to change to Postgres. I fell in love with it at first sight and want to work with it in the long term.</p><p>One thing we all need when working with databases is managing schema. ORM (Object-Relational Mapping) tools do it so well with up/down features. We write code in some specific languages (C#, Javascript) and those tools to execute those scripts to update the database. I just want a simple tool having the similar feature but for SQL scripts so I’ve written one by myself as an npm package: <code class="language-plaintext highlighter-rouge">@tqt/pg-migrate</code>.</p><p>pg-migrate is a tool which manages databases’ schema &amp; data with SQL scripts.</p><h3 id="1-use-pg-migrate-as-a-global-command">1. Use pg-migrate as a global command</h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">-g</span> @tqt/pg-migrate
</pre></table></code></div></div><p>You need to have a migration folder structured as below. You can name it whatever you want however its 2 sub-folders <code class="language-plaintext highlighter-rouge">up</code> and <code class="language-plaintext highlighter-rouge">down</code> are required. Put your main scripts in the <code class="language-plaintext highlighter-rouge">up</code> folder and name them in the alphabetical order (the order you want it to run). In case you want to downgrade, you need to place their counterparts in the <code class="language-plaintext highlighter-rouge">down</code> folder with the same name.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>- migration-folder
  - up
    - 001-add-sample-1.sql
    - 002-add-sample-2.sql
    - 003-add-sample-3.sql
  - down
    - 001-add-sample-1.sql
    - 002-add-sample-2.sql
    - 003-add-sample-3.sql
</pre></table></code></div></div><p>Then run the script with the <code class="language-plaintext highlighter-rouge">up</code> command</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pg-migrate up <span class="nt">--migration-folder</span> your-migration-folder <span class="nt">--host</span> host-name <span class="nt">--database</span> database-name <span class="nt">--port</span> port <span class="nt">--user</span> user-name <span class="nt">--password</span> password
</pre></table></code></div></div><p>For example</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pg-migrate up <span class="nt">--migration-folder</span> ./db-migration <span class="nt">--host</span> localhost <span class="nt">--database</span> sample <span class="nt">--port</span> 5432 <span class="nt">--user</span> postgres <span class="nt">--password</span> postgres
</pre></table></code></div></div><p>After the command executes, a table named <code class="language-plaintext highlighter-rouge">migration</code> is created in your current database with all executed scripts.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">id<th style="text-align: left">version<th style="text-align: right">createdAt<tbody><tr><td style="text-align: left">0<td style="text-align: left">001-add-sample-1<td style="text-align: right">1622278220790<tr><td style="text-align: left">1<td style="text-align: left">002-add-sample-2<td style="text-align: right">1622279735989<tr><td style="text-align: left">2<td style="text-align: left">003-add-sample-3<td style="text-align: right">1622279766950</table></div><p>In case you want to migrate to a specific version but not the latest one, run</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pg-migrate up 002-add-sample-2 <span class="nt">--migration-folder</span> ./db-migration <span class="nt">--host</span> localhost <span class="nt">--database</span> sample <span class="nt">--port</span> 5432 <span class="nt">--user</span> postgres <span class="nt">--password</span> postgres
</pre></table></code></div></div><p>To downgrade to a specific version, run the script with the <code class="language-plaintext highlighter-rouge">down</code> command</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pg-migrate down 002-add-sample-2 <span class="nt">--migration-folder</span> ./db-migration <span class="nt">--host</span> localhost <span class="nt">--database</span> sample <span class="nt">--port</span> 5432 <span class="nt">--user</span> postgres <span class="nt">--password</span> postgres
</pre></table></code></div></div><p>Instead of using parameters, you can use environment variables. You also may use a connection string. Here is the list of all parameters:</p><div class="table-wrapper"><table><thead><tr><th style="text-align: left">param<th style="text-align: left">alternative environment variable<th style="text-align: left">sample<tbody><tr><td style="text-align: left">–migration-folder<td style="text-align: left">POSTGRES_MIGRATION_FOLDER<td style="text-align: left">./db-migration<tr><td style="text-align: left">–host<td style="text-align: left">POSTGRES_HOST<td style="text-align: left">localhost<tr><td style="text-align: left">–port<td style="text-align: left">POSTGRES_PORT<td style="text-align: left">5432<tr><td style="text-align: left">–database<td style="text-align: left">POSTGRES_DATABASE<td style="text-align: left">postgres<tr><td style="text-align: left">–user<td style="text-align: left">POSTGRES_USER<td style="text-align: left">user<tr><td style="text-align: left">–password<td style="text-align: left">POSTGRES_PASSWORD<td style="text-align: left">password<tr><td style="text-align: left">–ssl<td style="text-align: left">POSTGRES_SSL<td style="text-align: left">true<tr><td style="text-align: left">–connectionString<td style="text-align: left">POSTGRES_CONNECTION_STRING<td style="text-align: left">postgresql://dbuser:secretpassword@database.server.com:3211/mydb</table></div><h3 id="2-use-pg-migrate-as-a-local-command">2. Use pg-migrate as a local command</h3><p>Install the package as a dep dependency in your project</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">--save-dev</span> @tqt/pg-migrate
</pre></table></code></div></div><p>or using yarn</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>yarn add <span class="nt">-D</span> @tqt/pg-migrate
</pre></table></code></div></div><p>Then run</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npx pg-migrate up <span class="nt">--migration-folder</span> your-migration-folder <span class="nt">--host</span> host-name <span class="nt">--database</span> database-name <span class="nt">--port</span> port <span class="nt">--user</span> user-name <span class="nt">--password</span> password
</pre></table></code></div></div><h3 id="3-run-it-in-your-code">3: Run it in your code</h3><p>Install the package as a dep dependency in your project</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>npm <span class="nb">install</span> <span class="nt">--save-dev</span> @tqt/pg-migrate
</pre></table></code></div></div><p>or using yarn</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span text-data=" Shell "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>yarn add <span class="nt">-D</span> @tqt/pg-migrate
</pre></table></code></div></div><p>Then import and run it in your code</p><div class="language-typescript highlighter-rouge"><div class="code-header"> <span text-data=" TypeScript "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed=""><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">import</span> <span class="p">{</span> <span class="nx">migrate</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">@tqt/pg-migrate</span><span class="dl">"</span><span class="p">;</span>

<span class="nx">migrate</span><span class="p">({</span>
  <span class="na">migrationFolder</span><span class="p">:</span> <span class="dl">"</span><span class="s2">./db-migration</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">mode</span><span class="p">:</span> <span class="dl">"</span><span class="s2">up</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">poolConfig</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">host</span><span class="p">:</span> <span class="dl">"</span><span class="s2">host</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">database</span><span class="p">:</span> <span class="dl">"</span><span class="s2">database</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">port</span><span class="p">:</span> <span class="mi">5432</span><span class="p">,</span>
    <span class="na">user</span><span class="p">:</span> <span class="dl">"</span><span class="s2">user</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">password</span><span class="p">:</span> <span class="dl">"</span><span class="s2">password</span><span class="dl">"</span><span class="p">,</span>
    <span class="na">ssl</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">});</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/tutorials/'>Tutorials</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/postgres/" class="post-tag no-text-decoration" >postgres</a> <a href="/tags/nodejs/" class="post-tag no-text-decoration" >nodejs</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"></div><div class="share-wrapper"> <span class="share-label text-muted mr-1"></span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Migrate Postgres database - Thinh Tran&url=https://thinhtran.pro/posts/migrate-postgres-database/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Migrate Postgres database - Thinh Tran&u=https://thinhtran.pro/posts/migrate-postgres-database/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Migrate Postgres database - Thinh Tran&url=https://thinhtran.pro/posts/migrate-postgres-database/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="" title-succeed=""> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span></span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/developer-guidelines/">Developer guidelines (Last updated at 2021-09-20)</a><li><a href="/posts/work-with-postgres-in-nodejs-using-tqt-pg-extensions/">Work with Postgres in Nodejs using @tqt/pg-extensions</a><li><a href="/posts/what-i-ve-learned-from-technical-analysis.md/">What I've learned from Technical Analysis (Last updated at 2021-06-13)</a><li><a href="/posts/start-of-something-new/">The start of something new</a><li><a href="/posts/use-cloudflare-proxy-with-lambda/">Use Cloudflare proxy with Lambda</a></ul></div><div id="access-tags"> <span></span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/nodejs/">nodejs</a> <a class="post-tag" href="/tags/postgres/">postgres</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/cloudflare/">cloudflare</a> <a class="post-tag" href="/tags/npm/">npm</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2"></span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip></h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/work-with-postgres-in-nodejs-using-tqt-pg-extensions/"><div class="card-body"> <span class="timeago small" >2021-06-09 12:20:00 +0700<i class="unloaded">2021-06-09T12:20:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Work with Postgres in Nodejs using @tqt/pg-extensions</h3><div class="text-muted small"><p> To work with Postgres in Nodejs, we can use an ORM tool (like sequelize) or interact directly with databases using queries and node-postgres. I prefer the second way since it maximize the perform...</p></div></div></a></div><div class="card"> <a href="/posts/developer-guidelines/"><div class="card-body"> <span class="timeago small" >2021-05-28 08:14:00 +0700<i class="unloaded">2021-05-28T08:14:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Developer guidelines (Last updated at 2021-09-20)</h3><div class="text-muted small"><p> The guidelines to develop applications focusing on Typescript, Nodejs, React, React Native, Postgres &amp; AWS. Backend 1. Use GraphQL with Express server import express from "express"; import h...</p></div></div></a></div><div class="card"> <a href="/posts/use-cloudflare-proxy-with-lambda/"><div class="card-body"> <span class="timeago small" >2021-05-28 13:15:00 +0700<i class="unloaded">2021-05-28T13:15:00+07:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Use Cloudflare proxy with Lambda</h3><div class="text-muted small"><p> Get the Origin Certificate from Cloudflare. Go to your domain management page on Cloudflare. Go to SSL/TLS, then change to the tab Origin Server. ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/use-cloudflare-proxy-with-lambda/" class="btn btn-outline-primary" prompt=""><p>Use Cloudflare proxy with Lambda</p></a> <a href="/posts/work-with-postgres-in-nodejs-using-tqt-pg-extensions/" class="btn btn-outline-primary" prompt=""><p>Work with Postgres in Nodejs using @tqt/pg-extensions</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://thinhtran.pro/posts/migrate-postgres-database/'; this.page.identifier = '/posts/migrate-postgres-database/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://thinhtran.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (modeToggle !== null) { modeToggle.addEventListener('click', reloadDisqus); window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/thinhtran3588">Thinh Tran</a>.</p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4"></h4><a class="post-tag" href="/tags/nodejs/">nodejs</a> <a class="post-tag" href="/tags/postgres/">postgres</a> <a class="post-tag" href="/tags/aws/">aws</a> <a class="post-tag" href="/tags/cloudflare/">cloudflare</a> <a class="post-tag" href="/tags/npm/">npm</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5"></p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
